---
import ImageLink from "../../components/ImageLink.astro";

import "swiper/css";
import "swiper/css/effect-fade";
import "swiper/css/autoplay";
import "swiper/css/navigation";
import "swiper/css/pagination";

export interface Props {
  images: Array<{
    src: string;
    href: string;
  }>;
  backgroundImage?: string;

  class?: string;
}

const { images, backgroundImage, class: className = "" } = Astro.props;
---

<div class:list={["debug"]}>
  {
    backgroundImage && (
      <div
        class:list={[
          "absolute",
          "inset-0",
          "z-0",
          "bg-cover",
          "bg-center",
          "bg-no-repeat",
        ]}
        style={`background-image: url('${backgroundImage}')`}
      />
    )
  }
  <section
    class:list={["container", "mx-auto", "px-4", "banner-slider", className]}
  >
    <div class:list={["swiper", "relative"]}>
      <div class:list={["swiper-wrapper"]}>
        {
          images.map((img) => (
            <div
              class:list={[
                "swiper-slide",
                "flex",
                "items-center",
                "justify-center",
              ]}
            >
              <ImageLink {...img}/>
            </div>
          ))
        }
      </div>
      <div class:list={["swiper-button-prev"]}></div>
      <div class:list={["swiper-button-next"]}></div>
      <div class:list={["swiper-pagination", "mt-6"]}></div>
    </div>
  </section>
</div>
<script>
  import Swiper from "swiper";
  import { Autoplay, EffectFade, Navigation, Pagination } from "swiper/modules";

  new Swiper(".banner-slider .swiper", {
    modules: [Autoplay, EffectFade, Navigation, Pagination],
    loop: true,
    effect: "fade",
    fadeEffect: {
      crossFade: true,
    },
    autoplay: {
      delay: 4000,
      disableOnInteraction: false,
    },
    navigation: {
      nextEl: ".banner-slider .swiper-button-next",
      prevEl: ".banner-slider .swiper-button-prev",
    },
    pagination: {
      el: ".banner-slider .swiper-pagination",
      clickable: true,
    },
  });
</script>
